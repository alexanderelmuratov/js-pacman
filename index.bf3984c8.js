function e(e,t,o,r){Object.defineProperty(e,t,{get:o,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},i=t.parcelRequiref884;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return o[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequiref884=i),i.register("kyEFX",(function(t,o){var r,i;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var s={};r=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)s[t[o]]=e[t[o]]},i=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"5ZPII":"index.bf3984c8.js","g9e6O":"munch.9f780f66.mp3","20nZ1":"pill.c07d011f.mp3","7I1iT":"game_start.0165b747.mp3","alKwv":"win.b7c9cbab.mp3","fY2Rt":"death.57cc7a29.mp3","h36oY":"eat_ghost.a39c3f91.mp3"}'));const s={ArrowLeft:{code:37,movement:-1,rotation:180},ArrowUp:{code:38,movement:-20,rotation:270},ArrowRight:{code:39,movement:1,rotation:0},ArrowDown:{code:40,movement:20,rotation:90}},n={BLANK:"blank",WALL:"wall",DOT:"dot",BLINKY:"blinky",PINKY:"pinky",INKY:"inky",CLYDE:"clyde",PILL:"pill",PACMAN:"pacman",GHOST:"ghost",SCARED:"scared",GHOSTLAIR:"lair"},d=[n.BLANK,n.WALL,n.DOT,n.BLINKY,n.PINKY,n.INKY,n.CLYDE,n.PILL,n.PACMAN,n.GHOSTLAIR],a=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,7,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,7,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,1,1,2,1,2,1,1,1,1,1,1,2,1,2,1,1,2,1,1,2,2,2,2,1,2,2,2,1,1,2,2,2,1,2,2,2,2,1,1,1,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,1,1,0,0,0,1,2,1,2,2,2,2,2,2,2,2,1,2,1,0,0,0,0,0,0,1,2,1,2,1,9,9,9,9,1,2,1,2,1,0,0,0,1,1,1,1,2,1,2,1,9,9,9,9,1,2,1,2,1,1,1,1,1,0,0,0,2,2,2,1,9,9,9,9,1,2,2,2,0,0,0,1,1,1,1,1,2,1,2,1,9,9,9,9,1,2,1,2,1,1,1,1,0,0,0,1,2,1,2,1,1,1,1,1,1,2,1,2,1,0,0,0,0,0,0,1,2,1,2,0,0,0,0,0,0,2,1,2,1,0,0,0,1,1,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,1,1,1,2,2,2,2,1,2,2,2,1,1,2,2,2,1,2,2,2,2,1,1,2,1,1,2,1,2,1,1,1,1,1,1,2,1,2,1,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,7,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,7,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,1,2,1,1,2,1,1,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],c=(e,t,o)=>{let r=t,i=e+r.movement;const d=Object.keys(s);for(;o(i,n.WALL)||o(i,n.GHOST);){const t=d[Math.floor(Math.random()*d.length)];r=s[t],i=e+r.movement}return{nextMovePos:i,direction:r}};class l{shouldMove(){return!!this.dir&&(this.timer===this.speed?(this.timer=0,!0):void this.timer++)}getNextMove(e){let t=this.pos+this.dir.movement;return(e(t,n.WALL)||e(t,n.GHOSTLAIR))&&(t=this.pos),{nextMovePos:t,direction:this.dir}}makeMove(){return{classesToRemove:[n.PACMAN],classesToAdd:[n.PACMAN]}}setNewPos(e,t){this.pos=e,this.dir=t}handleKeyInput(e,t){let o;if(!(e.keyCode>=37&&e.keyCode<=40))return;o=s[e.key];const r=this.pos+o.movement;t(r,n.WALL)||t(r,n.GHOSTLAIR)||(this.dir=o)}constructor(e,t){this.pos=t,this.speed=e,this.dir=null,this.timer=0,this.powerPill=!1,this.rotation=!0}}class h{shouldMove(){return this.timer===this.speed?(this.timer=0,!0):(this.timer++,!1)}getNextMove(e){const{nextMovePos:t,direction:o}=this.movement(this.pos,this.dir,e);return{nextMovePos:t,direction:o}}makeMove(){const e=[n.GHOST,n.SCARED,this.name];let t=[n.GHOST,this.name];return this.isScared&&(t=[...t,n.SCARED]),{classesToRemove:e,classesToAdd:t}}setNewPos(e,t){this.pos=e,this.dir=t}constructor(e,t,o,r){this.name=r,this.movement=o,this.startPos=t,this.pos=t,this.dir=s.ArrowRight,this.speed=e,this.timer=0,this.isScared=!1,this.rotation=!1}}var u;u=new URL(i("kyEFX").resolve("g9e6O"),import.meta.url).toString();var m;m=new URL(i("kyEFX").resolve("20nZ1"),import.meta.url).toString();var p;p=new URL(i("kyEFX").resolve("7I1iT"),import.meta.url).toString();var v;v=new URL(i("kyEFX").resolve("alKwv"),import.meta.url).toString();var L;L=new URL(i("kyEFX").resolve("fY2Rt"),import.meta.url).toString();var b;b=new URL(i("kyEFX").resolve("h36oY"),import.meta.url).toString();const E=document.querySelector("#game"),y=document.querySelector("#score"),w=document.querySelector("#start-button"),f=document.querySelector("#up-button"),A=document.querySelector("#left-button"),g=document.querySelector("#right-button"),k=document.querySelector("#down-button"),S=class{showGameStatus(e){const t=document.createElement("div");t.classList.add("game-status"),t.innerHTML=""+(e?"WIN!":"GAME OVER!"),this.DOMGrid.appendChild(t)}createGrid(e){this.dotCount=0,this.grid=[],this.DOMGrid.innerHTML="",this.DOMGrid.style.cssText="grid-template-columns: repeat(20, 20px)",e.forEach((e=>{const t=document.createElement("div");t.classList.add("square",d[e]),t.style.cssText="width: 20px; height: 20px",this.DOMGrid.appendChild(t),this.grid.push(t),d[e]===n.DOT&&this.dotCount++}))}addObject(e,t){this.grid[e].classList.add(...t)}removeObject(e,t){this.grid[e].classList.remove(...t)}objectExist(e,t){return this.grid[e].classList.contains(t)}rotateDiv(e,t){this.grid[e].style.transform=`rotate(${t}deg)`}moveCharacter(e){if(e.shouldMove()){const{nextMovePos:t,direction:o}=e.getNextMove(this.objectExist.bind(this)),{classesToRemove:r,classesToAdd:i}=e.makeMove();e.rotation&&t!==e.pos&&(this.rotateDiv(t,e.dir.rotation),this.rotateDiv(e.pos,0)),this.removeObject(e.pos,r),this.addObject(t,i),e.setNewPos(t,o)}}static createGameBoard(e,t){const o=new this(e);return o.createGrid(t),o}constructor(e){this.dotCount=0,this.grid=[],this.DOMGrid=e}}.createGameBoard(E,a);let O=0,x=0,I=!1,M=!1,P=null;const R=e=>{new Audio(e).play()},T=e=>{R(I?v:L),document.removeEventListener("keydown",(t=>e.handleKeyInput(t,S.objectExist.bind(S)))),f.removeEventListener("click",(t=>e.handleKeyInput(t,S.objectExist.bind(S)))),A.removeEventListener("click",(t=>e.handleKeyInput(t,S.objectExist.bind(S)))),g.removeEventListener("click",(t=>e.handleKeyInput(t,S.objectExist.bind(S)))),k.removeEventListener("click",(t=>e.handleKeyInput(t,S.objectExist.bind(S)))),S.showGameStatus(I),clearInterval(x),w.classList.remove("hide")},C=(e,t)=>{const o=t.find((t=>e.pos===t.pos));o&&(e.powerPill?(R(b),S.removeObject(o.pos,[n.GHOST,n.SCARED,o.name]),o.pos=o.startPos,O+=100):(S.removeObject(e.pos,[n.PACMAN]),S.rotateDiv(e.pos,0),T(e)))};w.addEventListener("click",(()=>{R(p),I=!1,M=!1,O=0,w.classList.add("hide"),S.createGrid(a);const e=new l(2,289);S.addObject(289,[n.PACMAN]),document.addEventListener("keydown",(t=>e.handleKeyInput(t,S.objectExist.bind(S)))),f.addEventListener("click",(t=>e.handleKeyInput({...t,keyCode:38,key:"ArrowUp"},S.objectExist.bind(S)))),A.addEventListener("click",(t=>e.handleKeyInput({...t,keyCode:37,key:"ArrowLeft"},S.objectExist.bind(S)))),g.addEventListener("click",(t=>e.handleKeyInput({...t,keyCode:39,key:"ArrowRight"},S.objectExist.bind(S)))),k.addEventListener("click",(t=>e.handleKeyInput({...t,keyCode:40,key:"ArrowDown"},S.objectExist.bind(S))));const t=[new h(5,188,c,n.BLINKY),new h(4,209,c,n.PINKY),new h(3,230,c,n.INKY),new h(2,251,c,n.CLYDE)];x=setInterval((()=>((e,t)=>{S.moveCharacter(e),C(e,t),t.forEach((e=>S.moveCharacter(e))),C(e,t),S.objectExist(e.pos,n.DOT)&&(R(u),S.removeObject(e.pos,[n.DOT]),S.dotCount--,O+=10),S.objectExist(e.pos,n.PILL)&&(R(m),S.removeObject(e.pos,[n.PILL]),e.powerPill=!0,O+=50,clearTimeout(P),P=setTimeout((()=>e.powerPill=!1),1e4)),e.powerPill!==M&&(M=e.powerPill,t.forEach((t=>t.isScared=e.powerPill))),0===S.dotCount&&(I=!0,T(e)),y.innerHTML=O})(e,t)),80)}));
//# sourceMappingURL=index.bf3984c8.js.map
